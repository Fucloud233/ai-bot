# Golang 后端

API 文档：[ApiFox](https://apifox.com/apidoc/shared-8da81565-7e10-4bc9-a216-c914d00c2345)

在此部分中主要存储一些业务数据，比如用户的账号密码等信息。
在项目初期，这里还存储了用户的聊天记录和对话的 API，
但是由于后面使用了向量数据库，为了避免数据冗余，
我们将聊天记录存放到向量数据库中，也就是 Python 后端。

而原本 Python 后端需要依附此后端运行，
但目前者已经实现了功能内聚，能够独立运行处理聊天记录存储和对话功能，
所以完全可以独立运行，而此部分后端则仅存储一些业务数据。

> 在未来，可能将此后端合并到 Python 后端中。

## 使用方法

### 1. 配置信息

本后端使用 MySQL 数据库作为后端，为了能够连通数据库，
请在`config/aibot.yml`文件中配置数据库连接的相关信息，
配置信息你可以参考我们的示例文件[`config/aibot.example.yml`](./config/aibot.example.yml)。

## 文件结构

```lua
.
|-- config  # 配置文件
|-- utils   # 实用工具
|-- model   # 数据库相关操作
|-- llm     # LLM聊天对话相关操作
|-- service # API实现
|-- router  # 路由配置
|-- main.go # 主函数
`
```

## 数据库介绍

数据库主要包括两张表

### 1. 用户表 UserBasic

| 字段名   | 中文名 | 类型   | 备注           |
| -------- | ------ | ------ | -------------- |
| phone    | 电话   | string | 用户的唯一标识 |
| password | 密码   | string |

### 2. 角色提示词 RolePrompt

存储用户对每个预设的角色自定义的提示词，
通过这些提示词能够丰富角色形象，
满足用户的需求。

用户在注册时，会在此处为其初始化所有的角色提示词（空）。

| 字段名      | 中文名     | 类型   | 备注 |
| ----------- | ---------- | ------ | ---- |
| phone       | 电话       | string | 外键 |
| bot_role    | 角色       | string |
| role_prompt | 角色提示词 | string |

> 目前我们仅提供了固定几个的预设角色，不允许用户手动创建更多的角色。
